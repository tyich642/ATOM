# ä»¥å¤ªåŠå¼€å‘æ•™ç¨‹

## ç¯å¢ƒé…ç½®æŒ‡å—

åœ¨Ubuntu 16.04ç³»ç»Ÿä¸‹æ­å»ºä»¥å¤ªåŠå¼€å‘ç¯å¢ƒï¼Œéœ€è¦æŒæ¡ä»¥ä¸‹æ ¸å¿ƒå·¥å…·é“¾ï¼š

### å¼€å‘å·¥å…·è§£æ
- **TestRPC**ï¼šåŸºäºå†…å­˜çš„æœ¬åœ°ä»¥å¤ªåŠæ¨¡æ‹Ÿç¯å¢ƒï¼Œé€‚åˆå¿«é€Ÿè°ƒè¯•
- **Geth**ï¼šGoè¯­è¨€å®ç°çš„ä»¥å¤ªåŠå®¢æˆ·ç«¯ï¼Œç”¨äºçœŸå®ç¯å¢ƒéƒ¨ç½²
- **Truffle**ï¼šä¸»æµå¼€å‘æ¡†æ¶ï¼Œæä¾›å®Œæ•´å¼€å‘å·¥å…·é›†
- **Solc**ï¼šSolidityæ™ºèƒ½åˆçº¦ç¼–è¯‘å™¨
- **Node.js**ï¼šJavaScriptè¿è¡Œç¯å¢ƒï¼Œæ”¯æ’‘å‰ç«¯äº¤äº’

ğŸ‘‰ [æŒæ¡åŒºå—é“¾å¼€å‘æ ¸å¿ƒæŠ€æœ¯](https://bit.ly/okx_welcome)

### ç¯å¢ƒæ­å»ºæ­¥éª¤
#### Node.jså®‰è£…
```bash
# å®‰è£…curlï¼ˆå¦‚æœªé¢„è£…ï¼‰
sudo apt-get install curl
# æ·»åŠ Node.jsæº
curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash â€“
# å®‰è£…Node.js
sudo apt-get install nodejs
```

#### æ ¸å¿ƒå·¥å…·å®‰è£…
```bash
# å®‰è£…Solidityç¼–è¯‘å™¨
sudo npm install -g solc solc-cli
# å®‰è£…Truffleæ¡†æ¶
sudo npm install -g truffle
# å®‰è£…TestRPCæµ‹è¯•ç¯å¢ƒ
sudo npm install -g ethereumjs-testrpc
```

#### Gethç¯å¢ƒé…ç½®
```bash
# æ·»åŠ ä»¥å¤ªåŠå®˜æ–¹ä»“åº“
sudo add-apt-repository ppa:ethereum/ethereum
sudo apt-get update
# å®‰è£…GethåŠç¼–è¯‘å™¨
sudo apt-get install solc software-properties-common ethereum
```

## å¼€å‘å…¨æµç¨‹å®è·µ

### é¡¹ç›®åˆå§‹åŒ–
```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir ethtest && cd ethtest
# åˆå§‹åŒ–Truffleé¡¹ç›®
truffle init
```
åˆå§‹åŒ–åç”Ÿæˆä»¥ä¸‹ç»“æ„ï¼š
| ç›®å½•/æ–‡ä»¶       | ç”¨é€”è¯´æ˜                |
|----------------|-----------------------|
| contracts/      | å­˜æ”¾Solidityåˆçº¦æ–‡ä»¶     |
| migrations/     | éƒ¨ç½²è„šæœ¬ç›®å½•            |
| test/           | æµ‹è¯•è„šæœ¬ç›®å½•            |
| truffle.js      | ç½‘ç»œé…ç½®æ–‡ä»¶            |

### æ™ºèƒ½åˆçº¦å¼€å‘
#### ç¼–å†™ç¬¬ä¸€ä¸ªåˆçº¦
åœ¨`contracts/SimpleStorage.sol`ä¸­åˆ›å»ºç¤ºä¾‹åˆçº¦ï¼š
```solidity
pragma solidity ^0.4.0;

contract SimpleStorage {
    uint storedData;

    function set(uint x) {
        storedData = x;
    }

    function get() constant returns (uint) {
        return storedData;
    }
}
```

#### ç¼–è¯‘ä¸éƒ¨ç½²
```bash
# å¯åŠ¨æµ‹è¯•ç½‘ç»œ
testrpc
# ç¼–è¯‘åˆçº¦
truffle compile
# åˆ›å»ºéƒ¨ç½²è„šæœ¬ï¼ˆ2_simple_storage.jsï¼‰
var SimpleStorage = artifacts.require("./SimpleStorage.sol");

module.exports = function(deployer) {
  deployer.deploy(SimpleStorage);
};
```

#### ç½‘ç»œé…ç½®ç¤ºä¾‹
```javascript
// truffle.jsé…ç½®æ–‡ä»¶
module.exports = {
  networks: {
    development: {
      host: "localhost",
      port: 8545,
      network_id: "*"
    },
    live: {
      host: "localhost",
      port: 8545,
      network_id: "*",
      gas: 3000000
    }
  }
};
```

ğŸ‘‰ [æ¢ç´¢åŒºå—é“¾æŠ€æœ¯å‰æ²¿](https://bit.ly/okx_welcome)

## å¸¸è§é—®é¢˜è§£ç­”

### Qï¼šTestRPCä¸Gethæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
Aï¼šTestRPCæ˜¯å†…å­˜æ¨¡æ‹Ÿç¯å¢ƒï¼Œé€‚åˆå¿«é€Ÿè°ƒè¯•ï¼Œæ•°æ®ä¸æŒä¹…åŒ–ï¼›Gethæ˜¯çœŸå®å®¢æˆ·ç«¯ï¼Œéœ€è¦åŒæ­¥åŒºå—é“¾æ•°æ®ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚

### Qï¼šåˆçº¦éƒ¨ç½²æ—¶æç¤ºgasä¸è¶³æ€ä¹ˆåŠï¼Ÿ
Aï¼šåœ¨truffle.jsçš„networké…ç½®ä¸­å¢åŠ gaså‚æ•°ï¼Œå»ºè®®ä¸»ç½‘éƒ¨ç½²æ—¶è®¾ç½®ä¸º300ä¸‡ä»¥ä¸Šã€‚

### Qï¼šå¦‚ä½•éªŒè¯åˆçº¦éƒ¨ç½²çŠ¶æ€ï¼Ÿ
Aï¼šä½¿ç”¨truffle consoleè¿æ¥å¯¹åº”ç½‘ç»œï¼Œé€šè¿‡`SimpleStorage.deployed()`æ£€æŸ¥åˆçº¦å®ä¾‹ã€‚

### Qï¼šç¼–è¯‘æ—¶æç¤ºç‰ˆæœ¬ä¸å…¼å®¹å¦‚ä½•è§£å†³ï¼Ÿ
Aï¼šç¡®è®¤solcç‰ˆæœ¬ä¸åˆçº¦pragmaå£°æ˜åŒ¹é…ï¼Œå¯é€šè¿‡`solc --version`æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ã€‚

## é«˜çº§æ“ä½œæŒ‡å—

### æ§åˆ¶å°è°ƒè¯•æŠ€å·§
```bash
# è¿æ¥æŒ‡å®šç½‘ç»œ
truffle console --network live
# è·å–åˆçº¦å®ä¾‹
var SS = SimpleStorage.at("0x1e7e7282e7f1279ddb24c493243ac891d320e59a")
# è°ƒç”¨åˆçº¦æ–¹æ³•
SS.set(42)
SS.get().then(console.log)
```

### è‡ªåŠ¨åŒ–æµ‹è¯•
åœ¨testç›®å½•åˆ›å»ºæµ‹è¯•è„šæœ¬ï¼š
```javascript
var SimpleStorage = artifacts.require("./SimpleStorage.sol");

contract("SimpleStorage", function(accounts) {
  it("should store the value 42", function() {
    return SimpleStorage.deployed().then(function(instance) {
      return instance.set(42, {from: accounts[0]});
    }).then(function() {
      return SimpleStorage.deployed().get();
    }).then(function(value) {
      assert.equal(value, 42, "Value was not stored properly");
    });
  });
});
```

### æŒç»­é›†æˆéƒ¨ç½²
```bash
# å¼ºåˆ¶é‡æ–°éƒ¨ç½²
truffle migrate --reset --network live
# æ¸…ç†ç½‘ç»œæ•°æ®
truffle networks --clean
```

## å¼€å‘æœ€ä½³å®è·µ

### ç›®å½•ç»“æ„ç®¡ç†
å»ºè®®é‡‡ç”¨ä»¥ä¸‹å¢å¼ºå‹ç»“æ„ï¼š
```bash
project/
â”œâ”€â”€ contracts/        # æ™ºèƒ½åˆçº¦
â”œâ”€â”€ migrations/       # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test/             # å•å…ƒæµ‹è¯•
â”œâ”€â”€ build/            # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ scripts/          # è¾…åŠ©è„šæœ¬
â””â”€â”€ config/           # é…ç½®æ–‡ä»¶
```

### ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
1. ä½¿ç”¨Truffleçš„migrationsç³»ç»Ÿè¿½è¸ªéƒ¨ç½²çŠ¶æ€
2. åœ¨package.jsonä¸­é”å®šä¾èµ–ç‰ˆæœ¬
3. ä¸ºæ¯ä¸ªç”Ÿäº§éƒ¨ç½²åˆ›å»ºgit tag

### å®‰å…¨æ³¨æ„äº‹é¡¹
- åˆçº¦ä»£ç éœ€ç»è¿‡[MythX](https://mythx.io/)å®‰å…¨åˆ†æ
- å…³é”®æ“ä½œå®æ–½å¤šç­¾éªŒè¯